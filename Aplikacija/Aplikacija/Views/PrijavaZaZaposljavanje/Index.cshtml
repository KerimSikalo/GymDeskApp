@model IEnumerable<Aplikacija.Models.PrijavaZaZaposljavanje>

@{
    ViewData["Title"] = "Kandidati za posao";
}

<h1 class="fw-bold text-center my-4">Kandidati za posao</h1>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    @foreach (var item in Model)
    {
        <div class="col">
            <div class="card h-100 text-center shadow-sm border-0">
                <div class="card-body d-flex flex-column align-items-center">
                    <img src="https://via.placeholder.com/100x100.png?text=👤" class="rounded-circle mb-3" alt="Kandidat" />
                    <h5 class="card-title fw-bold">@item.Korisnik.Ime @item.Korisnik.Prezime</h5>
                    <p class="text-muted">@item.Korisnik.Email</p>
                    <p class="card-text">@item.CV</p>

                    <div class="form-check">
                        <input class="form-check-input prihvati" type="checkbox" id="prihvati-@item.IdPrijava" data-group="@item.IdPrijava" />
                        <label class="form-check-label" for="prihvati-@item.IdPrijava">Prihvati</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input odbij" type="checkbox" id="odbij-@item.IdPrijava" data-group="@item.IdPrijava" />
                        <label class="form-check-label" for="odbij-@item.IdPrijava">Odbij</label>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@section Scripts {
    <script>
        document.querySelectorAll('.form-check-input').forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                const groupId = this.dataset.group;
                const isPrihvati = this.classList.contains('prihvati');
                const pairSelector = isPrihvati ? '.odbij' : '.prihvati';
                const other = document.querySelector(`${pairSelector}[data-group='${groupId}']`);

                if (this.checked) {
                    other.checked = false;
                }
            });
        });
    </script>
}
